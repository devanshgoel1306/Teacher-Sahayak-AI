{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/text-to-speech.ts"],"sourcesContent":["\n'use server';\n\n/**\n * @fileOverview A Genkit flow for synthesizing text into speech.\n * \n * - synthesizeSpeech - A function that converts text to audio.\n * - SynthesizeSpeechInput - The input type for the synthesizeSpeech function.\n * - SynthesizeSpeechOutput - The return type for the synthesizeSpeech function.\n */\n\nimport { ai } from '@/ai/genkit';\nimport { z } from 'genkit';\nimport wav from 'wav';\nimport { googleAI } from '@genkit-ai/googleai';\n\n\nconst SynthesizeSpeechInputSchema = z.object({\n  text: z.string().describe('The text to synthesize.'),\n  languageCode: z.string().optional().default('en-IN').describe('The language for the speech.'),\n});\nexport type SynthesizeSpeechInput = z.infer<typeof SynthesizeSpeechInputSchema>;\n\nconst SynthesizeSpeechOutputSchema = z.object({\n    audioDataUri: z.string().describe(\"The synthesized audio as a data URI. Expected format: 'data:audio/wav;base64,<encoded_data>'.\"),\n});\nexport type SynthesizeSpeechOutput = z.infer<typeof SynthesizeSpeechOutputSchema>;\n\n\nexport async function synthesizeSpeech(\n  input: SynthesizeSpeechInput\n): Promise<SynthesizeSpeechOutput> {\n  return synthesizeSpeechFlow(input);\n}\n\nasync function toWav(\n  pcmData: Buffer,\n  channels = 1,\n  rate = 24000,\n  sampleWidth = 2\n): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const writer = new wav.Writer({\n      channels,\n      sampleRate: rate,\n      bitDepth: sampleWidth * 8,\n    });\n\n    let bufs: any[] = [];\n    writer.on('error', reject);\n    writer.on('data', function (d) {\n      bufs.push(d);\n    });\n    writer.on('end', function () {\n      resolve(Buffer.concat(bufs).toString('base64'));\n    });\n\n    writer.write(pcmData);\n    writer.end();\n  });\n}\n\nconst synthesizeSpeechFlow = ai.defineFlow(\n  {\n    name: 'synthesizeSpeechFlow',\n    inputSchema: SynthesizeSpeechInputSchema,\n    outputSchema: SynthesizeSpeechOutputSchema,\n  },\n  async ({ text }) => {\n    if (!text) {\n        return { audioDataUri: '' };\n    }\n\n    try {\n        const { media } = await ai.generate({\n            model: googleAI.model('gemini-2.5-flash-preview-tts'),\n            config: {\n                responseModalities: ['AUDIO'],\n                speechConfig: {\n                voiceConfig: {\n                    prebuiltVoiceConfig: { voiceName: 'Algenib' },\n                },\n                },\n            },\n            prompt: text.substring(0, 5000), // Enforce a character limit\n        });\n\n        if (!media) {\n            throw new Error('No audio media returned from TTS model.');\n        }\n\n        const audioBuffer = Buffer.from(\n            media.url.substring(media.url.indexOf(',') + 1),\n            'base64'\n        );\n        \n        const wavBase64 = await toWav(audioBuffer);\n\n        return {\n            audioDataUri: 'data:audio/wav;base64,' + wavBase64,\n        };\n    } catch (error) {\n        console.error('Text-to-speech API error:', error);\n        throw new Error('Failed to synthesize speech.');\n    }\n  }\n);\n"],"names":[],"mappings":";;;;;;IA6BsB,mBAAA,WAAA,GAAA,CAAA,GAAA,yNAAA,CAAA,wBAAA,EAAA,8CAAA,yNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,yNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/voice-output.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Speaker, Loader2, StopCircle } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { synthesizeSpeech } from '@/ai/flows/text-to-speech';\nimport { cn } from '@/lib/utils';\n\ninterface VoiceOutputProps {\n  text: string;\n  language?: string;\n  className?: string;\n}\n\nexport function VoiceOutput({ text, language = 'en-IN', className }: VoiceOutputProps) {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    // Cleanup audio on component unmount\n    return () => {\n      if (audioRef.current) {\n        audioRef.current.pause();\n        audioRef.current = null;\n      }\n    };\n  }, []);\n\n  const playAudio = async () => {\n    if (!text) return;\n    \n    // If already playing, stop it\n    if (isPlaying && audioRef.current) {\n        audioRef.current.pause();\n        audioRef.current.currentTime = 0;\n        setIsPlaying(false);\n        return;\n    }\n    \n    setIsGenerating(true);\n    \n    try {\n      const result = await synthesizeSpeech({ text, languageCode: language });\n      \n      if (result.audioDataUri) {\n        const audio = new Audio(result.audioDataUri);\n        audioRef.current = audio;\n        \n        setIsPlaying(true);\n        audio.play();\n        \n        audio.onended = () => {\n          setIsPlaying(false);\n          audioRef.current = null;\n        };\n        \n        audio.onerror = () => {\n          setIsPlaying(false);\n          audioRef.current = null;\n           toast({\n            variant: 'destructive',\n            title: 'Audio Error',\n            description: 'Could not play the generated audio.',\n          });\n        };\n      } else {\n         toast({\n            variant: 'destructive',\n            title: 'Audio Generation Failed',\n            description: 'The audio could not be generated for this text.',\n         });\n      }\n    } catch (error) {\n      console.error('TTS Error:', error);\n       toast({\n        variant: 'destructive',\n        title: 'TTS Error',\n        description: 'An unexpected error occurred while generating speech.',\n      });\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  return (\n    <Button\n      type=\"button\"\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={playAudio}\n      disabled={isGenerating || !text}\n      className={cn(\"rounded-full\", className)}\n    >\n      {isGenerating ? (\n        <Loader2 className=\"animate-spin\" />\n      ) : isPlaying ? (\n        <StopCircle className=\"text-primary\" />\n      ) : (\n        <Speaker />\n      )}\n    </Button>\n  );\n};\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;;;AAPA;;;;;;;AAeO,SAAS,YAAY,EAAE,IAAI,EAAE,WAAW,OAAO,EAAE,SAAS,EAAoB;;IACnF,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,WAAW,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAA2B;IACjD,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,WAAQ,AAAD;IAEzB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,qCAAqC;YACrC;yCAAO;oBACL,IAAI,SAAS,OAAO,EAAE;wBACpB,SAAS,OAAO,CAAC,KAAK;wBACtB,SAAS,OAAO,GAAG;oBACrB;gBACF;;QACF;gCAAG,EAAE;IAEL,MAAM,YAAY;QAChB,IAAI,CAAC,MAAM;QAEX,8BAA8B;QAC9B,IAAI,aAAa,SAAS,OAAO,EAAE;YAC/B,SAAS,OAAO,CAAC,KAAK;YACtB,SAAS,OAAO,CAAC,WAAW,GAAG;YAC/B,aAAa;YACb;QACJ;QAEA,gBAAgB;QAEhB,IAAI;YACF,MAAM,SAAS,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE;gBAAE;gBAAM,cAAc;YAAS;YAErE,IAAI,OAAO,YAAY,EAAE;gBACvB,MAAM,QAAQ,IAAI,MAAM,OAAO,YAAY;gBAC3C,SAAS,OAAO,GAAG;gBAEnB,aAAa;gBACb,MAAM,IAAI;gBAEV,MAAM,OAAO,GAAG;oBACd,aAAa;oBACb,SAAS,OAAO,GAAG;gBACrB;gBAEA,MAAM,OAAO,GAAG;oBACd,aAAa;oBACb,SAAS,OAAO,GAAG;oBAClB,MAAM;wBACL,SAAS;wBACT,OAAO;wBACP,aAAa;oBACf;gBACF;YACF,OAAO;gBACJ,MAAM;oBACH,SAAS;oBACT,OAAO;oBACP,aAAa;gBAChB;YACH;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,cAAc;YAC3B,MAAM;gBACL,SAAS;gBACT,OAAO;gBACP,aAAa;YACf;QACF,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,qBACE,6LAAC,qIAAA,CAAA,SAAM;QACL,MAAK;QACL,SAAQ;QACR,MAAK;QACL,SAAS;QACT,UAAU,gBAAgB,CAAC;QAC3B,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,gBAAgB;kBAE7B,6BACC,6LAAC,oNAAA,CAAA,UAAO;YAAC,WAAU;;;;;mBACjB,0BACF,6LAAC,qNAAA,CAAA,aAAU;YAAC,WAAU;;;;;iCAEtB,6LAAC,2MAAA,CAAA,UAAO;;;;;;;;;;AAIhB;GA1FgB;;QAII,+HAAA,CAAA,WAAQ;;;KAJZ","debugId":null}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"file":"speaker.js","sources":["file:///home/user/studio/node_modules/lucide-react/src/icons/speaker.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '16', height: '20', x: '4', y: '2', rx: '2', key: '1nb95v' }],\n  ['path', { d: 'M12 6h.01', key: '1vi96p' }],\n  ['circle', { cx: '12', cy: '14', r: '4', key: '1jruaj' }],\n  ['path', { d: 'M12 14h.01', key: '1etili' }],\n];\n\n/**\n * @component @name Speaker\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTYiIGhlaWdodD0iMjAiIHg9IjQiIHk9IjIiIHJ4PSIyIiAvPgogIDxwYXRoIGQ9Ik0xMiA2aC4wMSIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjE0IiByPSI0IiAvPgogIDxwYXRoIGQ9Ik0xMiAxNGguMDEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/speaker\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Speaker = createLucideIcon('Speaker', __iconNode);\n\nexport default Speaker;\n"],"names":[],"mappings":";;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAuB,CAAA,CAAA,CAAA,CAAA;IAClC;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ;QAAA,CAAA;YAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAO;YAAM,CAAQ,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAM,CAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAK,GAAG,CAAK,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAI,CAAK,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA,CAAA;IAC9E;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAAa,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA,CAAA;IAC1C;QAAC,QAAU,CAAA;QAAA,CAAA;YAAE,EAAI,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAM,CAAI,CAAA,CAAA,CAAA,IAAA,CAAM;YAAA,CAAG,EAAA,CAAA,CAAA,CAAA,CAAA;YAAK,GAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA,CAAA;IACxD;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAAc,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA;CAC7C,CAAA;AAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAU,CAAA,2KAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAiB,CAAjB,CAAA,AAAiB,CAAjB,AAAiB,CAAjB,AAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAW,CAAU,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 233, "column": 0}, "map": {"version":3,"file":"circle-stop.js","sources":["file:///home/user/studio/node_modules/lucide-react/src/icons/circle-stop.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['rect', { x: '9', y: '9', width: '6', height: '6', rx: '1', key: '1ssd4o' }],\n];\n\n/**\n * @component @name CircleStop\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cmVjdCB4PSI5IiB5PSI5IiB3aWR0aD0iNiIgaGVpZ2h0PSI2IiByeD0iMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/circle-stop\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleStop = createLucideIcon('CircleStop', __iconNode);\n\nexport default CircleStop;\n"],"names":[],"mappings":";;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAuB,CAAA,CAAA,CAAA,CAAA;IAClC;QAAC,QAAU,CAAA;QAAA,CAAA;YAAE,EAAI,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAM,CAAI,CAAA,CAAA,CAAA,IAAA,CAAM;YAAA,CAAG,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAM,GAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA,CAAA;IACzD;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ;QAAA,CAAA;YAAE,CAAA,CAAA,CAAG;YAAK,CAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAK,CAAO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAK,QAAQ,CAAK,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAI,CAAK,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA;CAC9E,CAAA;AAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,UAAA,CAAa,CAAA,2KAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAiB,CAAjB,CAAA,AAAiB,CAAjB,AAAiB,CAAjB,AAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAc,CAAU,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA","ignoreList":[0],"debugId":null}}]
}